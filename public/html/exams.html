<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PFE | Examens</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/Exams.css">
</head>
<body>
    <div id="leftMenu" class="leftMenu">
        <div class="titleDiv">
            <h1 id="Section"></h1>
        </div>
        <h3>Menu :</h3>

        <div class="moduleMenu" id="moduleMenu">
            <div class="moduleElement" onclick="location.href = '/edt'">
                <p>Emploi du temps</p>
                <div class="notifDiv"></div>
            </div>
            <div class="moduleElement selected_module" onclick="location.href = '/msg'">
                <p>Messagerie</p>
            </div>
            <div class="moduleElement" onclick="location.href = '/files'">
                <p>Documents</p>
            </div>
            <div class="moduleElement" onclick="location.href = '/notes'">
                <p>Notes</p>
            </div>
            <div class="moduleElement">
                <p>Informations Personnels</p>
            </div>
            <div class="moduleElement"  onclick="downloadFile('USTHB_Plan.pdf')">
                <p>USTHB map</p>
            </div>
        </div>

        <div class="leftMenuInfoDiv">
            <div class="parametresDiv" id="parametresDiv">
                <img src="/icons/Icon_gear.png" alt="">
                <h3>Parametres</h3>
            </div>
            <p>Version 0.2</p>
        </div>




    </div>
    <div id="popUpBackground"></div>


    <div class="mainPart">
        <div class="Top">
            <button class="hamburgerMenu" onclick="toogleMenu()"><img id="imgBtnToogleMenu" src="/icons/icon_hamburger.png" alt=""></button>
            <h1>Examens</h1>
        </div>

        <div class="examen">
            <div class="examInfo" id="examInfo">
                <h1>Module x</h1>
                <h5>Monsieur X</h5>
                <h5>Date: 12/12/2012</h5>
                <h5>Heure: 12:00 → 14:00</h5>
                <h5>Notation:  /20</h5>
                <h5>Coef: 3</h5>
                <div class="note">
                    <h5>Note de l'enseignant:</h5>
                    <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ex consequuntur qui impedit omnis nulla maxime quos consectetur aperiam dolorem cum, assumenda labore explicabo?</p>
                </div>
            </div>

            <div class="sujet">
                <h3>Sujet de l'examen</h3>
                <form action="/home" id="questionnaire">
                    <div class="box">
                        <div class="question">
                            <p><strong><u>Question 1:</u></strong> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestias nemo ipsa consequatur ?</p>
                        </div>
                        <div class="reponse">
                            <input type="text" name="q1" placeholder="Reponse 1">
                        </div>
                    </div>

                    <div class="box">
                        <div class="question">
                            <p><strong><u>Question 2:</u></strong> Lorem, ipsum dolor sit amet consectetur adipisicing elit ?</p>
                        </div>
                        <div class="reponse">
                            <input type="text" name="q2" placeholder="Reponse 2">
                        </div>
                    </div>

                    <div class="box">
                        <div class="question">
                            <p><strong><u>Question 3:</u></strong> Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quae ?</p>
                        </div>
                        <div class="reponse">
                            <div class="qcm">
                                <input type="checkbox" name="q3" value="A">
                                <label for="q3">Reponse 1</label>
                            </div>
                            <div class="qcm">
                                <input type="checkbox" name="q3" value="B">
                                <label for="q3">Reponse 2</label>
                            </div>
                            <div class="qcm">
                                <input type="checkbox" name="q3" value="C">
                                <label for="q3">Reponse 3</label>
                            </div>
                        </div>
                    </div>

                    <div class="box">
                        <div class="question">
                            <p><strong><u>Question 4:</u></strong> Lorem ipsum dolor sit amet consectetur adipisicing elit. Odit harum porro mollitia eligendi, nisi ipsa suscipit cupiditate assumenda, id voluptatibus tenetur fuga corporis atque error vel similique inventore molestiae facere dolor iste quaerat. Ab, porro aut ?</p>
                        </div>
                        <div class="reponse">
                            <input type="text" name="q4" placeholder="Reponse 4">
                        </div>
                    </div>

                    <div class="box">
                        <div class="question">
                            <p><strong><u>Question 5:</u></strong> Lorem ipsum dolor sit amet consectetur adipisicing elit. Debitis veniam natus eos sed dolore, qui aperiam ?</p>
                        </div>
                        <div class="reponse">
                            <textarea name="q5" cols="50" rows="3" placeholder="Reponse 5"></textarea>
                        </div>
                    </div>

                    <input id="repondre" type="submit" value="Envoyer vos reponses">
                </form>


            </div>

        </div>
        
    </div>



    <div class="rightPart">
        <div class="profileDiv">
            <img class="profilePicDiv" id="pdp" src="/icons/default_user.png">
            <div class="profileTextDiv">
                <p id="nom"></p>
                <p id="prenom"></p>
                <button id="profileSubMenuBtn">Mon compte</button>
            </div>

        </div>

        <h3>Travaux actuels</h3>
        <div class="travaux">
            <div class="travauxElement">
                <h3>Dev Web</h3>
                <p>Tp3: les variables session</p>
            </div>
            <div class="travauxElement">
                <h3>Dev Web</h3>
                <p>Tp3: les variables session</p>
            </div>
            <div class="travauxElement">
                <h3>Dev Web</h3>
                <p>Tp3: les variables session</p>
            </div>
        </div>

    </div>


    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.js" defer></script>
    <script src="/js/exams.js" defer></script>
    <script>
        //connection to the socket
        socket = io()
        socket.on('connect', () => {
            socket.emit("connected", [document.cookie]) //get  the cookies with the connection socket
        })


        
        socket.on('connectedEtu', (data) => { //get the data from the server with the acknoledgement
            login = data[0]["login"]            //get the login from the data
            prenom = data[0]["prenom"]        //get the first part of the login (the prenom)
            nom = data[0]["nom"]              //get the second part of the login (the nom)
            pdp = data[0]["photo"]
            if(pdp.byteLength != 0){                    //if the user has a profile picture
                pdpB = new Blob([pdp])
                url = URL.createObjectURL(pdpB)

                document.getElementById("pdp").src = url
            }
            sec = "L" + data[0]["niveau"] + " " + data[0]["specialite"] //get the section (LX spé)
            idSec = data[0]["idSec"]
            
            document.getElementById("nom").innerHTML = nom          //replace the nom with the right one
            document.getElementById("prenom").innerHTML = prenom    //replace the prenom with the right one
            document.getElementById("Section").innerHTML = sec      //replace the section with the right one
            
            
            //add the event listener to the module buttons to change the selected module
            const modulesBtns = document.querySelectorAll('.moduleElement');
            modulesBtns.forEach(moduleBtn => {
                moduleBtn.addEventListener('click', () => {
                    modulesBtns.forEach(moduleBtn => {moduleBtn.classList.remove("selected_module")})
                    moduleBtn.classList.add("selected_module")
                    // change the main part menu title
                    document.getElementById("mainTitle").innerHTML = `Actualité ${moduleBtn.children[0].innerHTML}`
                })
            })
            selected_module = document.querySelectorAll('.selected_module')[0].innerHTML;
            
            
            
        })
    </script>
</body>
</html>